<!DOCTYPE html>
<html lang="ja">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <title>Repos</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Bootstrap table -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.0/bootstrap-table.min.css'>
    <link rel='stylesheet'
        href='https://rawgit.com/vitalets/x-editable/master/dist/bootstrap3-editable/css/bootstrap-editable.css'>

    <!-- React -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <!--
    <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
    -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
</head>

<body>
    <div className="container">
        <div className="section" id="app1">
        </div>
    </div>

    <!-- Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <!-- Bootstrap table -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.0/bootstrap-table.js'></script>
    <script
        src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/editable/bootstrap-table-editable.js'></script>
    <script
        src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/export/bootstrap-table-export.js'></script>
    <script src='https://rawgit.com/hhurz/tableExport.jquery.plugin/master/tableExport.js'></script>
    <script
        src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/filter-control/bootstrap-table-filter-control.js'></script>

    <script>
        var $table = $('#table');
        $(function () {
            $('#toolbar').find('select').change(function () {
                $table.bootstrapTable('refreshOptions', {
                    exportDataType: $(this).val()
                });
            });
        })

        var trBoldBlue = $("table");

        $(trBoldBlue).on("click", "tr", function () {
            $(this).toggleClass("bold-blue");
        });
    </script>

    <!-- React -->
    <script type="text/babel">
    const URL_GITHUB_API = 'https://api.github.com/users/{USERNAME}/repos?per_page=100&page={PAGE}';
    const suffixGithubIo = '.github.io';

    function getQueries() {
        var vars = [], max = 0, hash = '', array = '';
        var url = window.location.search;

        hash  = url.slice(1).split('&');
        max = hash.length;
        for (var i = 0; i < max; i++) {
            array = hash[i].split('=');
            vars.push(array[0]);
            vars[array[0]] = array[1];
        }

        return vars;
    }

    function getQueryName() {
        let queryName = 'ya-androidapp';

        let usrname = window.location.username;
        if ((typeof(usrname) != 'undefined') && (usrname.length > 0)) {
            queryName = usrname;
        } else {
            let hstname = window.location.hostname;
            if (hstname.indexOf(suffixGithubIo) > -1) {
                queryName = (hstname.split(suffixGithubIo))[0];
            } else {
                let pthname = window.location.pathname;
                if ((hstname.indexOf('github.com') > -1) && (pthname.length > 1)) {
                    queryName = ((pthname.substring(1)).split('/'))[0];
                } else {
                    let queries = getQueries();
                    if (typeof(queries.name) != 'undefined') {
                        queryName = queries.name;
                    }
                }
            }
        }

        return queryName;
    }

    class App extends React.Component {
        constructor(props) {
            super(props);

            let queryName = getQueryName();

            this.state = {
                name: queryName,
                repos:[]
            }

            this.handleChangeName = this.handleChangeName.bind(this);
            this.handleSubmit = this.handleSubmit.bind(this);
        }

        handleChangeName(event) {
            this.setState({name: event.target.value});
        }

        handleSubmit(event) {
            console.log('A name was submitted: ' + this.state.value);
            event.preventDefault();
        }

        retrieveGitHubReposInformation(paramPage) {
            const PARAM_USER_NAME = this.state.name;
            let self = this;

            axios.get(URL_GITHUB_API.replace('{USERNAME}', PARAM_USER_NAME).replace('{PAGE}', paramPage))
                .then(function (response) {
                    self.setState({
                        repos: self.state.repos.concat(response.data)
                    });

                    if(response.data.length>99){
                        self.retrieveGitHubReposInformation(++paramPage);
                    }
                })
                .catch(function (error) {
                    console.log(error);
                })
                .finally(function () {
                });
        }

        render() {
            return (
                <div>
                    <nav className="navbar navbar-dark bg-dark">
                        <a href="#" className="navbar-brand">Repos</a>
                        <form className="form-inline" onSubmit={this.handleSubmit}>
                            <div className="input-group">
                                <input type="text" className="form-control" value={this.state.name} onChange={this.handleChangeName} />
                                <div className="input-group-append">
                                    <button type="button" className="btn btn-secondary" onClick={()=>this.retrieveGitHubReposInformation(1)}>Retieve</button>
                                </div>
                            </div>
                        </form>
                    </nav>
                    <div className="jumbotron">
                        <h1 className="display-4">Dashboard</h1>
                        <p className="lead">Summary and charts of <a href={ 'https://github.com/' + this.state.name } target="_blank">{ this.state.name }</a></p>
                        <hr className="my-4" />
                        <p>Lorem ipsum dolor sit amet, ea eos nisl vidit autem. Ut sit albucius recteque, ignota accusata honestatis ex usu, quo ea ridens oportere scripserit. In eum enim discere iracundia. Possim everti facilisis mel in, paulo repudiare te mel. Ea duo iudicabit accommodare, an qui ludus suscipiantur, sea perfecto forensibus necessitatibus an.</p>
                        <a className="btn btn-primary btn-lg" href="#" role="button">Learn more</a>
                    </div>
                    <FilterSortTable />
                    <div id="repos-carousel" className="carousel slide" data-ride="carousel" style={{width: 400 +'px'}}>
                        <ol className="carousel-indicators">
                            <li data-target="#repos-carousel" data-slide-to="0" className="active"></li>
                            <li data-target="#repos-carousel" data-slide-to="1"></li>
                            <li data-target="#repos-carousel" data-slide-to="2"></li>
                        </ol>
                        <div className="carousel-inner">
                            <div className="carousel-item active">
                                First slide
                            </div>
                            <div className="carousel-item">
                                Second slide
                            </div>
                            <div className="carousel-item">
                                Third slide
                            </div>

                            <a className="carousel-control-prev" href="#repos-carousel" role="button" data-slide="prev">
                                <span className="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span className="sr-only">Previous</span>
                            </a>
                            <a className="carousel-control-next" href="#repos-carousel" role="button" data-slide="next">
                                <span className="carousel-control-next-icon" aria-hidden="true"></span>
                                <span className="sr-only">Next</span>
                            </a>
                        </div>
                    </div>
                    <div>
                        <ul>
                            {this.state.repos.map((repo) => {
                                let archived = repo.archived ? 'Archived' : '-';
                                let description = repo.description != null ? repo.description : '---';
                                let disabled = repo.disabled ? 'Disabled' : '-';
                                let forked = repo.fork ? 'Fork' : '-';
                                let ghpagesUrl = 'https://' + repo.owner.login + '.github.io/' + repo.name;
                                let lang = repo.language != null ? repo.language : '---';
                                let license = repo.license != null ? repo.license.name : '---';
                                let userUrl = repo.owner.html_url;

                                return <li key={repo.id}>
                                    <a href={userUrl} target="_blank">
                                        <img style={{ height: 24 }} src={repo.owner.avatar_url}></img>{repo.owner.login}
                                    </a>
                                    <span> / </span>
                                    <a href={repo.html_url} target="_blank">{repo.name}</a>
                                    <span> / </span>
                                    <a href={repo.git_url} target="_blank">git</a>
                                    <span> / </span>
                                    <a href={repo.ssh_url} target="_blank">ssh</a>
                                    <span> / </span>
                                    <a href={repo.clone_url} target="_blank">clone</a>
                                    { repo.has_pages &&
                                        <span>
                                            <span> / </span>
                                            <a href={ghpagesUrl} target="_blank">Pages</a>
                                        </span>
                                    }
                                    <br />
                                    {repo.created_at}
                                    <span> / </span>
                                    {repo.updated_at}
                                    <span> / </span>
                                    {lang}
                                    <span> / </span>
                                    {license}
                                    <span> / </span>
                                    {archived}
                                    <span> / </span>
                                    {disabled}
                                    <span> / </span>
                                    {forked}
                                    <span> / </span>
                                    {repo.forks_count}
                                    <span> / </span>
                                    {repo.forks}
                                    <span> / </span>
                                    {repo.open_issues_count}
                                    <span> / </span>
                                    {repo.open_issues}
                                    <span> / </span>
                                    {repo.stargazers_count}
                                    <span> / </span>
                                    {repo.watchers_count}
                                    <span> / </span>
                                    {repo.watchers}
                                    <br />
                                    {description}
                                    <br />
                                    <br />
                                    </li>;
                            })}
                        </ul>
                    </div>
                </div>
            )
        }
    }

    class FilterSortTable extends React.Component {
        render() {
            return  <div className="container">
                        <div id="toolbar">
                            <select className="form-control">
                                <option value="">Export Basic</option>
                                <option value="all">Export All</option>
                                <option value="selected">Export Selected</option>
                            </select>
                        </div>
                        <table id="table"
                            data-toggle="table"
                            data-search="true"
                            data-filter-control="true"
                            data-show-export="true"
                            data-click-to-select="true"
                            data-toolbar="#toolbar"
                            className="table-responsive">
                            <thead>
                                <tr>
                                    <th data-field="state" data-checkbox="true"></th>
                                    <th data-field="prenom" data-filter-control="input" data-sortable="true">First Name</th>
                                    <th data-field="date" data-filter-control="select" data-sortable="true">Date</th>
                                    <th data-field="examen" data-filter-control="select" data-sortable="true">Examination</th>
                                    <th data-field="note" data-sortable="true">Note</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td className="bs-checkbox "><input data-index="0" name="btSelectItem" type="checkbox" /></td>
                                    <td>Jitender</td>
                                    <td>01/09/2015</td>
                                    <td>Français</td>
                                    <td>12/20</td>
                                </tr>
                                <tr>
                                    <td className="bs-checkbox "><input data-index="1" name="btSelectItem" type="checkbox" /></td>
                                    <td>Jahid</td>
                                    <td>05/09/2015</td>
                                    <td>Philosophie</td>
                                    <td>8/20</td>
                                </tr>
                                <tr>
                                    <td className="bs-checkbox "><input data-index="2" name="btSelectItem" type="checkbox" /></td>
                                    <td>Valentin</td>
                                    <td>05/09/2015</td>
                                    <td>Philosophie</td>
                                    <td>4/20</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>;
        }
    }

    ReactDOM.render(
        <App />,
        document.getElementById('app1')
    );
    </script>
</body>

</html><!-- Copyright (c) 2019 YA-androidapp(https://github.com/YA-androidapp) All rights reserved. -->